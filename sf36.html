<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionário SF-36</title>
    <style>
        /* Estilos mantidos para visual limpo e médico */
        :root { --primary: #0056b3; --bg: #f4f7f6; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: #333; margin: 0; padding: 20px; line-height: 1.6; }
        .container { max-width: 850px; margin: 0 auto; background-color: var(--white); padding: 40px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: var(--primary); margin-bottom: 10px; }
        p.intro { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 30px; }
        
        .section-box { border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 30px; background: #fff; }
        .section-title { background-color: #e9ecef; padding: 10px 15px; font-weight: bold; color: var(--primary); border-radius: 5px; margin-bottom: 15px; }
        .instruction { font-style: italic; color: #555; margin-bottom: 15px; font-size: 0.95em; background: #f1f8ff; padding: 10px; border-left: 4px solid var(--primary); }

        .form-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .form-group { flex: 1; }
        label.field-label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9em; }
        input[type="text"], input[type="date"], input[type="number"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

        .question-block { margin-bottom: 25px; border-bottom: 1px solid #f0f0f0; padding-bottom: 15px; }
        .q-text { font-weight: 600; margin-bottom: 10px; display: block; }
        .options-list { display: flex; flex-direction: column; gap: 6px; }
        .radio-label { display: flex; align-items: flex-start; cursor: pointer; font-weight: normal; }
        .radio-label input { margin-right: 10px; margin-top: 5px; transform: scale(1.2); }

        button.btn-submit { background-color: var(--primary); color: white; padding: 18px; border: none; border-radius: 6px; width: 100%; font-size: 1.2em; cursor: pointer; transition: background 0.2s; font-weight: bold; }
        button.btn-submit:hover { background-color: #004494; }
        
        /* Loading spinner */
        .loading { opacity: 0.7; pointer-events: none; }
            /* --- NOVO CSS DO MENU SUPERIOR --- */
    .app-header {
        background-color: #ffffff;
        padding: 10px 40px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
    }

    .logo-area { display: flex; align-items: center; gap: 12px; }
    .logo-img { height: 40px; width: auto; }
    .app-name { font-size: 1.4rem; font-weight: 700; color: #0056b3; margin: 0; }

    .nav-menu { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; }
    .nav-menu a { text-decoration: none; color: #666; font-weight: 600; transition: 0.3s; position: relative; }
    .nav-menu a:hover, .nav-menu a.active { color: #0056b3; }
    
    /* Linha animada abaixo do link */
    .nav-menu a::after {
        content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0;
        background-color: #0056b3; transition: width 0.3s;
    }
    .nav-menu a:hover::after, .nav-menu a.active::after { width: 100%; }
    /* --- NOVO CSS DO MENU SUPERIOR --- */
    .app-header {
        background-color: #ffffff;
        padding: 10px 40px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
    }

    .logo-area { display: flex; align-items: center; gap: 12px; }
    .logo-img { height: 40px; width: auto; }
    .app-name { font-size: 1.4rem; font-weight: 700; color: #0056b3; margin: 0; }

    .nav-menu { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; }
    .nav-menu a { text-decoration: none; color: #666; font-weight: 600; transition: 0.3s; position: relative; }
    .nav-menu a:hover, .nav-menu a.active { color: #0056b3; }
    
    /* Linha animada abaixo do link */
    .nav-menu a::after {
        content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0;
        background-color: #0056b3; transition: width 0.3s;
    }
    .nav-menu a:hover::after, .nav-menu a.active::after { width: 100%; }
    /* ... existing code ... */

        /* --- RESPONSIVIDADE (MOBILE) --- */
        @media (max-width: 768px) {
            body { padding: 10px; }
            
            /* Ajuste do Cabeçalho */
            .app-header {
                flex-direction: column; /* Empilha logo e menu */
                padding: 15px 20px;
                gap: 15px;
            }
            
            .nav-menu {
                gap: 15px;
                font-size: 0.9rem;
                width: 100%;
                justify-content: center;
            }

            /* Ajuste do Container e Formulário */
            .container {
                padding: 20px; /* Reduz padding interno */
            }

            .form-row {
                flex-direction: column; /* Empilha inputs (ex: idade, peso, altura) */
                gap: 0;
            }

            .form-group {
                margin-bottom: 15px;
            }
        }
    </style>
</head>

</style>
</head>
<body>
<!-- MENU SUPERIOR -->
<nav class="app-header">
    <div class="logo-area">
        <!-- Ícone de exemplo (substitua pelo seu logo se tiver) -->
        <img src="https://cdn-icons-png.flaticon.com/512/2966/2966334.png" alt="Logo" class="logo-img">
        <h2 class="app-name">SF-36 Analytics</h2>
    </div>

    <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Relatório</a></li>
        <li><a href="comparativo.html" class="active">Comparação</a></li>
    </ul>
</nav>
<div class="container">
    <h1>Questionário SF-36</h1>
    <p class="intro">Medical Outcomes Study 36-Item Short-Form Health Survey</p>

    <form id="sf36Form">
        <!-- DADOS DO PACIENTE -->
        <div class="section-box">
            <div class="section-title">Identificação</div>
            <div class="form-row">
                <div class="form-group">
                    <label class="field-label">Iniciais:</label>
                    <input type="text" id="iniciais" required placeholder="Ex: J.S.">
                </div>
                <div class="form-group">
                    <label class="field-label">Data de Nascimento:</label>
                    <input type="date" id="nascimento" required>
                </div>
                <div class="form-group">
                    <label class="field-label">Cidade:</label>
                    <input type="text" id="cidade" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="field-label">Gênero:</label>
                    <select id="genero" required>
                        <option value="">Selecione...</option>
                        <option value="masculino">Masculino</option>
                        <option value="feminino">Feminino</option>
                        <option value="nao_binario">Não Binário</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="field-label">Idade:</label>
                    <input type="number" id="idade" required min="0" max="150" placeholder="Ex: 35">
                </div>
                <div class="form-group">
                    <label class="field-label">Peso (kg):</label>
                    <input type="number" id="peso" required min="0" max="500" step="0.1" placeholder="Ex: 70.5">
                </div>
                <div class="form-group">
                    <label class="field-label">Altura (cm):</label>
                    <input type="number" id="altura" required min="0" max="300" placeholder="Ex: 175">
                </div>
            </div>
        </div>

        <!-- QUESTÃO 1 -->
        <div class="section-box">
            <div class="question-block">
                <span class="q-text">1. Em geral você diria que sua saúde é:</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q1" value="1" required> 1-Excelente</label>
                    <label class="radio-label"><input type="radio" name="q1" value="2"> 2-Muito Boa</label>
                    <label class="radio-label"><input type="radio" name="q1" value="3"> 3-Boa</label>
                    <label class="radio-label"><input type="radio" name="q1" value="4"> 4-Ruim</label>
                    <label class="radio-label"><input type="radio" name="q1" value="5"> 5-Muito Ruim</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">2. Comparada a um ano atrás, como você classificaria sua saúde em geral, agora?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q2" value="1" required> 1-Muito Melhor</label>
                    <label class="radio-label"><input type="radio" name="q2" value="2"> 2-Um Pouco Melhor</label>
                    <label class="radio-label"><input type="radio" name="q2" value="3"> 3-Quase a Mesma</label>
                    <label class="radio-label"><input type="radio" name="q2" value="4"> 4-Um Pouco Pior</label>
                    <label class="radio-label"><input type="radio" name="q2" value="5"> 5-Muito Pior</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 3 a 12 -->
        <div class="section-box">
            <div class="section-title">Atividades Diárias</div>
            <div class="instruction">
                3 a 12. Os seguintes itens são sobre atividades que você poderia fazer atualmente durante um dia comum. Devido à sua saúde, você teria dificuldade para fazer estas atividades? Neste caso, quanto?
            </div>

            <div class="question-block">
                <span class="q-text">3. Atividades vigorosas, que exigem muito esforço, tais como correr, levantar objetos pesados, participar em esportes árduos.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q3" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q3" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q3" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">4. Atividades moderadas, tais como mover uma mesa, passar aspirador de pó, jogar bola, varrer a casa.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q4" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q4" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q4" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">5. Levantar ou carregar mantimentos.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q5" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q5" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q5" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">6. Subir vários lances de escada.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q6" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q6" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q6" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">7. Subir um lance de escada.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q7" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q7" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q7" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">8. Curvar-se, ajoelhar-se ou dobrar-se.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q8" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q8" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q8" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">9. Andar mais de 1 quilômetro.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q9" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q9" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q9" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">10. Andar vários quarteirões.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q10" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q10" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q10" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">11. Andar um quarteirão.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q11" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q11" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q11" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">12. Tomar banho ou vestir-se.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q12" value="1" required> 1-Sim, dificulta muito</label>
                    <label class="radio-label"><input type="radio" name="q12" value="2"> 2-Sim, dificulta um pouco</label>
                    <label class="radio-label"><input type="radio" name="q12" value="3"> 3-Não, não dificulta de modo algum</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 13 a 16 -->
        <div class="section-box">
            <div class="section-title">Saúde Física e Trabalho</div>
            <div class="instruction">
                13 a 16. Durante as últimas 4 semanas, você teve algum dos seguintes problemas com seu trabalho ou com alguma atividade regular, como consequência de sua saúde física?
            </div>

            <div class="question-block">
                <span class="q-text">13. Você diminuiu a quantidade de tempo que se dedicava ao seu trabalho ou a outras atividades?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q13" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q13" value="2"> 2-Não</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">14. Realizou menos tarefas do que você gostaria?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q14" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q14" value="2"> 2-Não</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">15. Esteve limitado no seu tipo de trabalho ou a outras atividades.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q15" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q15" value="2"> 2-Não</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">16. Teve dificuldade de fazer seu trabalho ou outras atividades (p.ex. necessitou de um esforço extra).</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q16" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q16" value="2"> 2-Não</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 17 a 19 -->
        <div class="section-box">
            <div class="section-title">Problemas Emocionais e Trabalho</div>
            <div class="instruction">
                17 a 19. Durante as últimas 4 semanas, você teve algum dos seguintes problemas com seu trabalho ou outra atividade regular diária, como consequência de algum problema emocional (como se sentir deprimido ou ansioso)?
            </div>

            <div class="question-block">
                <span class="q-text">17. Você diminuiu a quantidade de tempo que se dedicava ao seu trabalho ou a outras atividades?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q17" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q17" value="2"> 2-Não</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">18. Realizou menos tarefas do que você gostaria?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q18" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q18" value="2"> 2-Não</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">19. Não realizou ou fez qualquer das atividades com tanto cuidado como geralmente faz.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q19" value="1" required> 1-Sim</label>
                    <label class="radio-label"><input type="radio" name="q19" value="2"> 2-Não</label>
                </div>
            </div>
        </div>

        <!-- QUESTÃO 20 -->
        <div class="section-box">
            <div class="question-block">
                <span class="q-text">20. Durante as últimas 4 semanas, de que maneira sua saúde física ou problemas emocionais interferiram nas suas atividades sociais normais, em relação à família, amigos ou em grupo?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q20" value="1" required> 1-De forma nenhuma</label>
                    <label class="radio-label"><input type="radio" name="q20" value="2"> 2-Ligeiramente</label>
                    <label class="radio-label"><input type="radio" name="q20" value="3"> 3-Moderadamente</label>
                    <label class="radio-label"><input type="radio" name="q20" value="4"> 4-Bastante</label>
                    <label class="radio-label"><input type="radio" name="q20" value="5"> 5-Extremamente</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 21 e 22 -->
        <div class="section-box">
            <div class="section-title">Dor</div>
            <div class="question-block">
                <span class="q-text">21. Quanta dor no corpo você teve durante as últimas 4 semanas?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q21" value="1" required> 1-Nenhuma</label>
                    <label class="radio-label"><input type="radio" name="q21" value="2"> 2-Muito leve</label>
                    <label class="radio-label"><input type="radio" name="q21" value="3"> 3-Leve</label>
                    <label class="radio-label"><input type="radio" name="q21" value="4"> 4-Moderada</label>
                    <label class="radio-label"><input type="radio" name="q21" value="5"> 5-Grave</label>
                    <label class="radio-label"><input type="radio" name="q21" value="6"> 6-Muito grave</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">22. Durante as últimas 4 semanas, quanto a dor interferiu com seu trabalho normal (incluindo o trabalho dentro de casa)?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q22" value="1" required> 1-De maneira alguma</label>
                    <label class="radio-label"><input type="radio" name="q22" value="2"> 2-Um pouco</label>
                    <label class="radio-label"><input type="radio" name="q22" value="3"> 3-Moderadamente</label>
                    <label class="radio-label"><input type="radio" name="q22" value="4"> 4-Bastante</label>
                    <label class="radio-label"><input type="radio" name="q22" value="5"> 5-Extremamente</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 23 a 31 -->
        <div class="section-box">
            <div class="section-title">Sentimentos e Disposição</div>
            <div class="instruction">
                23 a 31. Estas questões são sobre como você se sente e como tudo tem acontecido com você durante as últimas 4 semanas. Para cada questão, por favor dê uma resposta que mais se aproxime da maneira como você se sente.
            </div>

            <div class="question-block">
                <span class="q-text">23. Quanto tempo você tem se sentido cheio de vigor, de vontade, de força?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q23" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q23" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q23" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q23" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q23" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q23" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">24. Quanto tempo você tem se sentido uma pessoa muito nervosa?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q24" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q24" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q24" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q24" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q24" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q24" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">25. Quanto tempo você tem se sentido tão deprimido que nada pode animá-lo?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q25" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q25" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q25" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q25" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q25" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q25" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">26. Quanto tempo você tem se sentido calmo ou tranquilo?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q26" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q26" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q26" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q26" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q26" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q26" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">27. Quanto tempo você tem se sentido com muita energia?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q27" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q27" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q27" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q27" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q27" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q27" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">28. Quanto tempo você tem se sentido desanimado ou abatido?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q28" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q28" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q28" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q28" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q28" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q28" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">29. Quanto tempo você tem se sentido esgotado?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q29" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q29" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q29" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q29" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q29" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q29" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">30. Quanto tempo você tem se sentido uma pessoa feliz?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q30" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q30" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q30" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q30" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q30" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q30" value="6"> 6-Nunca</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">31. Quanto tempo você tem se sentido cansado?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q31" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q31" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q31" value="3"> 3-Uma boa parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q31" value="4"> 4-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q31" value="5"> 5-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q31" value="6"> 6-Nunca</label>
                </div>
            </div>
        </div>

        <!-- QUESTÃO 32 -->
        <div class="section-box">
            <div class="question-block">
                <span class="q-text">32. Durante as últimas 4 semanas, quanto de seu tempo a sua saúde física ou problemas emocionais interferiram com as suas atividades sociais (como visitar amigos, parentes, etc)?</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q32" value="1" required> 1-Todo tempo</label>
                    <label class="radio-label"><input type="radio" name="q32" value="2"> 2-A maior parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q32" value="3"> 3-Alguma parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q32" value="4"> 4-Uma pequena parte do tempo</label>
                    <label class="radio-label"><input type="radio" name="q32" value="5"> 5-Nenhuma parte do tempo</label>
                </div>
            </div>
        </div>

        <!-- QUESTÕES 33 a 36 -->
        <div class="section-box">
            <div class="section-title">Percepção de Saúde</div>
            <div class="instruction">
                33 a 36. O quanto verdadeiro ou falso é cada uma das afirmações para você?
            </div>

            <div class="question-block">
                <span class="q-text">33. Eu costumo adoecer um pouco mais facilmente que as outras pessoas.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q33" value="1" required> 1-Definitivamente verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q33" value="2"> 2-A maioria das vezes verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q33" value="3"> 3-Não sei</label>
                    <label class="radio-label"><input type="radio" name="q33" value="4"> 4-A maioria das vezes falso</label>
                    <label class="radio-label"><input type="radio" name="q33" value="5"> 5-Definitivamente falso</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">34. Eu sou tão saudável quanto qualquer pessoa que eu conheço.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q34" value="1" required> 1-Definitivamente verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q34" value="2"> 2-A maioria das vezes verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q34" value="3"> 3-Não sei</label>
                    <label class="radio-label"><input type="radio" name="q34" value="4"> 4-A maioria das vezes falso</label>
                    <label class="radio-label"><input type="radio" name="q34" value="5"> 5-Definitivamente falso</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">35. Eu acho que a minha saúde vai piorar.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q35" value="1" required> 1-Definitivamente verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q35" value="2"> 2-A maioria das vezes verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q35" value="3"> 3-Não sei</label>
                    <label class="radio-label"><input type="radio" name="q35" value="4"> 4-A maioria das vezes falso</label>
                    <label class="radio-label"><input type="radio" name="q35" value="5"> 5-Definitivamente falso</label>
                </div>
            </div>

            <div class="question-block">
                <span class="q-text">36. Minha saúde é excelente.</span>
                <div class="options-list">
                    <label class="radio-label"><input type="radio" name="q36" value="1" required> 1-Definitivamente verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q36" value="2"> 2-A maioria das vezes verdadeiro</label>
                    <label class="radio-label"><input type="radio" name="q36" value="3"> 3-Não sei</label>
                    <label class="radio-label"><input type="radio" name="q36" value="4"> 4-A maioria das vezes falso</label>
                    <label class="radio-label"><input type="radio" name="q36" value="5"> 5-Definitivamente falso</label>
                </div>
            </div>
        </div>

        <button type="submit" class="btn-submit" id="btnSubmit">ENVIAR AVALIAÇÃO</button>
    </form>
</div>

<!-- FIREBASE SDK -->
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
    import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';

    // --- COLOQUE SUAS CHAVES AQUI ---
    const firebaseConfig = {
        apiKey: "AIzaSyCcztFPDBnbnGbMZTG7rImLWxG8YQx4ZwE",
        authDomain: "sf36-e9873.firebaseapp.com",
        projectId: "sf36-e9873",
        storageBucket: "sf36-e9873.firebasestorage.app",
        messagingSenderId: "509487905740",
        appId: "1:509487905740:web:60f6d7590c7ca29d0a7b69"
    };

    // Inicialização do Firebase
    let app, db;
    try {
        app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        console.log("Firebase inicializado com sucesso.");
    } catch (e) {
        console.error("Erro ao inicializar Firebase:", e);
        alert("Erro na configuração do Firebase. Verifique o console.");
    }

    // --- FASE 1: RECODIFICAÇÃO (0-100) ---
    function recodificar(valor, q) {
        valor = parseInt(valor);
        if (isNaN(valor)) return 0;

        // Q1: 1=100, 2=75, 3=50, 4=25, 5=0
        if (q === 1) return {1:100, 2:75, 3:50, 4:25, 5:0}[valor] || 0;

        // Q2: 1=100, 2=75, 3=50, 4=25, 5=0 (Melhor = 100)
        if (q === 2) return {1:100, 2:75, 3:50, 4:25, 5:0}[valor] || 0;

        // Q3-Q12: 1=0, 2=50, 3=100 (Sim, dificulta muito = 0)
        if (q >= 3 && q <= 12) return {1:0, 2:50, 3:100}[valor] || 0;

        // Q13-Q19: 1=0, 2=100 (Sim = 0, Não = 100)
        if (q >= 13 && q <= 19) return {1:0, 2:100}[valor] || 0;

        // Q20: 1=100, 2=75, 3=50, 4=25, 5=0 (De forma nenhuma = 100)
        if (q === 20) return {1:100, 2:75, 3:50, 4:25, 5:0}[valor] || 0;

        // Q21: 1=100, 2=80, 3=60, 4=40, 5=20, 6=0 (Nenhuma dor = 100)
        if (q === 21) return {1:100, 2:80, 3:60, 4:40, 5:20, 6:0}[valor] || 0;

        // Q22: 1=100, 2=75, 3=50, 4=25, 5=0 (De maneira alguma = 100)
        if (q === 22) return {1:100, 2:75, 3:50, 4:25, 5:0}[valor] || 0;

        // Q23, 26, 27, 30 (Positivas): 1=100, 2=80, 3=60, 4=40, 5=20, 6=0
        if ([23, 26, 27, 30].includes(q)) return {1:100, 2:80, 3:60, 4:40, 5:20, 6:0}[valor] || 0;

        // Q24, 25, 28, 29, 31 (Negativas): 1=0, 2=20, 3=40, 4=60, 5=80, 6=100
        if ([24, 25, 28, 29, 31].includes(q)) return {1:0, 2:20, 3:40, 4:60, 5:80, 6:100}[valor] || 0;

        // Q32: 1=0, 2=25, 3=50, 4=75, 5=100 (Todo tempo = 0)
        if (q === 32) return {1:0, 2:25, 3:50, 4:75, 5:100}[valor] || 0;

        // Q33, 35 (Verdadeiro = Ruim): 1=0, 2=25, 3=50, 4=75, 5=100
        if ([33, 35].includes(q)) return {1:0, 2:25, 3:50, 4:75, 5:100}[valor] || 0;

        // Q34, 36 (Verdadeiro = Bom): 1=100, 2=75, 3=50, 4=25, 5=0
        if ([34, 36].includes(q)) return {1:100, 2:75, 3:50, 4:25, 5:0}[valor] || 0;

        return 0;
    }

    function calcularMedia(arr) {
        if (!arr.length) return 0;
        return parseFloat((arr.reduce((a,b)=>a+b,0) / arr.length).toFixed(1));
    }

    // --- ESCUTAR O ENVIO DO FORMULÁRIO ---
    document.getElementById('sf36Form').addEventListener('submit', async function(e) {
        e.preventDefault(); // IMPEDE O RECARREGAMENTO DA PÁGINA
        console.log("Botão clicado. Iniciando processamento...");

        const btn = document.querySelector('.btn-submit');
        btn.textContent = "Enviando...";
        btn.classList.add('loading');
        btn.disabled = true;

        const formData = new FormData(e.target);
        const respostas = Object.fromEntries(formData.entries());

        // Validação dos campos obrigatórios
        if(!document.getElementById('iniciais').value || 
           !document.getElementById('nascimento').value ||
           !document.getElementById('cidade').value ||
           !document.getElementById('genero').value ||
           !document.getElementById('idade').value ||
           !document.getElementById('peso').value ||
           !document.getElementById('altura').value) {
            alert("Por favor, preencha todos os campos da identificação do paciente.");
            resetBtn();
            return;
        }

        // Validação de altura (sem vírgula)
        const altura = document.getElementById('altura').value;
        if (altura.includes(',')) {
            alert("A altura deve ser informada em centímetros sem vírgula. Ex: 175");
            resetBtn();
            return;
        }

        // Processar Respostas e Fase 1
        const raw = {};
        const f1 = {};
        
        try {
            for(let i=1; i<=36; i++) {
                let val = parseInt(respostas[`q${i}`]);
                if (isNaN(val)) {
                    throw new Error(`Questão ${i} não respondida.`);
                }
                raw[`q${String(i).padStart(2,'0')}`] = val;
                f1[`q${String(i).padStart(2,'0')}_score`] = recodificar(val, i);
            }

            // Fase 2: Domínios (Agrupamento Padrão SF-36)
            const dominios = {
                capacidade_funcional: calcularMedia([f1.q03_score, f1.q04_score, f1.q05_score, f1.q06_score, f1.q07_score, f1.q08_score, f1.q09_score, f1.q10_score, f1.q11_score, f1.q12_score]),
                aspectos_fisicos: calcularMedia([f1.q13_score, f1.q14_score, f1.q15_score, f1.q16_score]),
                dor: calcularMedia([f1.q21_score, f1.q22_score]),
                estado_geral: calcularMedia([f1.q01_score, f1.q33_score, f1.q34_score, f1.q35_score, f1.q36_score]),
                vitalidade: calcularMedia([f1.q23_score, f1.q27_score, f1.q29_score, f1.q31_score]),
                aspectos_sociais: calcularMedia([f1.q20_score, f1.q32_score]),
                aspectos_emocionais: calcularMedia([f1.q17_score, f1.q18_score, f1.q19_score]),
                saude_mental: calcularMedia([f1.q24_score, f1.q25_score, f1.q26_score, f1.q28_score, f1.q30_score])
            };

            const payload = {
                data_aplicacao: new Date().toISOString().split('T')[0],
                paciente: {
                    iniciais: document.getElementById('iniciais').value,
                    nascimento: document.getElementById('nascimento').value,
                    cidade: document.getElementById('cidade').value,
                    genero: document.getElementById('genero').value,
                    idade: parseInt(document.getElementById('idade').value),
                    peso: parseFloat(document.getElementById('peso').value),
                    altura: parseInt(document.getElementById('altura').value)
                },
                respostas_brutas: raw,
                fase1_recodificacao: f1,
                fase2_dominios: dominios
            };

            console.log("Dados prontos para envio:", payload);

            // Envio para Firebase
            await addDoc(collection(db, 'pacientes_sf36'), payload);
            console.log("Sucesso!");
            alert('Avaliação salva com sucesso!');
            e.target.reset();
            window.scrollTo(0,0);

        } catch (error) {
            console.error("Erro:", error);
            if (error.code === 'permission-denied') {
                alert("Erro de Permissão: Verifique se o banco de dados está em 'Modo de Teste' no console do Firebase.");
            } else {
                alert('Erro ao salvar: ' + error.message);
            }
        } finally {
            resetBtn();
        }
    });

    function resetBtn() {
        const btn = document.querySelector('.btn-submit');
        btn.textContent = "ENVIAR AVALIAÇÃO";
        btn.classList.remove('loading');
        btn.disabled = false;
    }
</script>

</body>
</html>